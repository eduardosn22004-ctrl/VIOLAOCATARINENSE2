---
import Layout from '../layouts/Layout.astro';

// --- BANCO DE DADOS DOS MÚSICOS ---
const musicos = [
  {
    id: "edino-krieger",
    nome: "Edino Krieger",
    foto: "/images/pessoas/edino1.avif",
    bio: `
      <p>Nascido em Brusque (SC), a 17 de março de 1928.  Iniciou aos 7 anos estudos de violino com seu pai, Aldo Krieger, violinista, 
      compositor, regente e fundador do Conservatório de Música local. Realizou recitais de violino em diversas cidades a partir dos 9 anos 
      e aos 15 transferiu-se para o Rio de Janeiro, com bolsa de estudos do governo do estado, para prosseguir seus estudos no 
      Conservatório Brasileiro de Música, onde iniciou estudos de contraponto, harmonia e composição com H. J. Koellreutter, compositor e 
      professor alemão chegado ao Brasil no período da 2ª Guerra Mundial. Em 1948 foi escolhido em concurso para estudar com Aaron Copland, 
      no Berkshire Music Center de Massachussets, Estados Unidos, onde assistiu também aulas de Darius Milhaud. Em seguida estagiou por um ano na 
      Juilliard School of Music de Nova Iorque, na classe de composição de Peter Mennin.  Estudou também violino com William Nowinsky, 
      assistente de Ivan  Galamian, na Henry Street Settlement School of Music.  Representou a Juilliard no Simpósio de Compositores dos Estados Unidos
       e Canadá realizado em Boston, e atuou como violinista da Mozart Orchestra de Nova Iorque. Em 1952 realizou estudos com Ernst Krenek no
        III Curso Internacional de Verão de Teresópolis, RJ. Como bolsista do Conselho Britânico, estudou em Londres durante um ano com Lennox Berkeley, 
        da Royal Academy of Music.</p>
      
      <p class="mt-4 font-bold text-red-600 uppercase">Cargos</p>
      <p>Retornando ao Brasil em 1950, iniciou uma atividade permanente como produtor de programas musicais para a Rádio Ministério da Educação, 
      onde exerceu a função de diretor musical e organizou a Orquestra Sinfônica Nacional. De 1950 a 1952 exerceu a crítica musical do
       jornal "Tribuna da Imprensa".  Em 1969 e 1970 organizou e dirigiu os Festivais de Música da Guanabara, dos quais se originaram, 
       a partir de 1975, as Bienais de Música Brasileira Contemporânea.  Dirigiu a divisão de música clássica da "Rádio Jornal do Brasil" e 
       exerceu a crítica musical no "Jornal do Brasil". Em 1976 assumiu a direção artística da FUNTERJ - Fundação de Teatros do Rio de Janeiro, e
        nessa função organizou a temporada de reabertura do Theatro Municipal e o Centro de Produções Teatrais de Inhaúma. Em 1979 criou o 
        Projeto Memória Musical Brasileira/PRO-MEMUS, junto ao Instituto Nacional de Arte da FUNARTE - Fundação Nacional de Arte, 
        do Ministério da Cultura.  De 1981 a 1989 exerceu a direção do Instituto Nacional de Música. Em 1989 assumiu a presidência da FUNARTE.
         De 2003 a 2006 exerceu a presidência da Fundação Museu da Imagem e do Som do Rio de Janeiro. É membro da Comissão Internacional para a 
         Difusão da Cultura Catalã, de Barcelona, Espanha.Foi  membro do Conselho Estadual de Cultura do Rio de Janeiro. Foi eleito, em 1998,
          presidente da Academia Brasileira de Música.  </p>
      
      <p class="mt-4 font-bold text-red-600 uppercase">Características estéticas</p>
      <p>Sua evolução estética parte do impressionismo do Improviso para flauta, de 1944, para alcançar o serialismo com oTrio de Sopros, 
      de 1945. Em 1952 abandona o serialismo em favor de uma experimentação mais profunda das formas e linguagens tradicionais e da temática musical
       de caráter brasileiro. Em 1965, com as Variações Elementares, inicia uma síntese de suas experiências anteriores, passando a utilizar recursos
        de vanguarda e tradicionais, juntamente com elementos absorvidos da cultura musical brasileira</p>
      
      <p class="mt-4 font-bold text-red-600 uppercase">Premiações</p>
      <p>1945 recebeu o Prêmio Música Viva por seu Trio de Sopros, passando então a integrar o Grupo Música Viva de compositores de vanguarda, 
      ao lado de Koellreutter, Claudio Santoro, Guerra-Peixe e Eunice Catunda. passando então a integrar o Grupo Música Viva de compositores de vanguarda,
       ao lado de Koellreutter, Claudio Santoro, Guerra-Peixe e Eunice Catunda. Em 1955 obteve o Prêmio Internacional da Paz do Festival de Varsóvia e o
        Prêmio da Fundação Rottelini de Roma Em 1959 obteve o primeiro prêmio no I Concurso Nacional de Composição instituído pelo Ministério da Educação,
         com o Divertimento para Cordas, e recebeu Medalha de Honra do Cinquentenário do Theatro Municipal do Rio de Janeiro.  Em 1961 seu 
         Quarteto de Cordas nº  1 obteve o Prêmio Nacional do Disco. Em 1966 e 1967 obteve Medalha de Ouro nos Festivais Internacionais da Canção,
          no Rio de Janeiro. Em 1969 e 1988 recebeu o Troféu Golfinho de Ouro pelo conjunto de sua obra. 1977- titular do Troféu Barriga-Verde 1997- 
          Medalha do Mérito Cultural Cruz e Souza, conferida pelo Conselho Estadual de Cultura de Santa Catarina 1986- 
          Medalha do Mérito Cultural Anita Garibaldi, atribuída pelo Estado de Santa Catarina. No ano anterior recebeu a Comenda da ordem cultural
           do Ministério da Cultura e Belas Artes da Polônia. Em Tóquio, recebeu uma semana de homenagens, realizando seis palestras e tendo suas músicas
           , tanto as de câmara quanto sinfônicas, tocadas por músicos japoneses. Tem atuado também como regente, principalmente de suas próprias obras. 
            1994 - Prêmio Nacional da Música do Ministério da Cultura. 1998 - Medalha Pedro Ernesto, maior honraria concedida pela cidade do Rio de Janeiro
             a personalidades do meio cultural. Recentemente (08/12/2011) recebeu o título de Doutor Honoris Causa da 
             Universidade Federal de Santa Catarina.</p>
      
      <p class="mt-4 font-bold text-red-600 uppercase">Características das obras </p>
      <p>eu catálogo inclui obras para orquestra sinfônica e de câmara, oratórios, música de câmara, 
      obras para coro e para vozes e instrumentos solistas, alem de partituras incidentais para teatro e cinema. 
      Suas composições têm sido executadas com frequência no Brasil e no exterior, 
      inclusive por orquestras do Rio de Janeiro, São Paulo, Porto Alegre, Recife, Bahia, Belo Horizonte, Liege, Bruxelas, Paris, Londres, Munique, 
      Buenos Aires, Cordoba, Nova Iorque, Filadelfia, Washington, Colônia, Tóquio e outras.</p>
             
      <p class="mt-4 font-bold text-red-600 uppercase">Obras Principais</p>
      <p>Sua produção inclui as 3 Imagens de Nova Friburgo (1988), para cordas e cravo, o Romance de Santa Cecilia (1989), 
      para narrador, soprano, coro infantil e orquestra, a Camerata (1991), para 6 instrumentos, o Concerto para dois violões e cordas (1994),
       as Telas Sonoras (1997) para quarteto de cordas, o Te Deum Puerorum Brasiliae (1997), para coro infantil, coro juvenil,
        coro gregoriano, metais e percussão, elaborado com a utilização simultânea de 3 sistemas modais que contribuíram para a 
        formação da cultura musical brasileira - o gregoriano, o indígena e o nordestino -, composto para as comemorações oficiais da 
        visita de S.S. o Papa João Paulo II ao Rio de Janeiro, em 1997. , a Abertura Solene, comemorativa dos 200 anos da chegada ao
         Brasil da família real portuguesa, a Passacalha para o novo milênio, para orquestra (encomenda da OSESP – 1999 ); 
         Terra Brasilis, painel sinfônico, encomenda do Ministério da Cultura para as comemorações dos 500 anos do Descobrimento,
          Passacalha para Fred Schneiter, para violão (2002), Momentos, para cravo (2002), Pequena Seresta para Bach, para violoncelo solo,
           encomenda de Antonio Meneses ( 2004 ), Variações carnavalescas, para marimba ( 2004 ), Fanfarras modulares, para orquestra ( 2005 ),
            Concerto para violoncelo e orquestra ( 2005, dedicado a Antonio Meneses ), Suíte Concertante, para violão e orquestra (2005,
             dedicada a Turíbio Santos ) – as duas últimas compostas com apoio das Bolsas Vitae de Artes, 4 Imagens de Santa Catarina,
              para orquestra de cordas ( 2006 , encomenda da Camerata Florianópolis ), Ritmetrias, para orquestra 
              ( 2006, encomenda do Festival  Internacional de Música de Campos do Jordão, onde atuou com o compositor residente. 
               Sua produção mais recente inclui Histórias da Ilha , musical infantil ( 2010, e Trio Tocata ( 2011 )
                para piano, violino e violoncelo, dedicado ao Trio Aquárius e estreado na Bienal de Música Brasileira Contemporânea de 2011.    
                Em 1965 suas Variações Elementares foram estreadas no III Festival Interamericano de Música de Washington, 
                e no ano seguinte seu Ludus Symphonicus era estreado pela Orquestra de Filadelfia no III Festival de Música de Caracas, Venezuela. 
                 Em Bruxelas, Bélgica, como convidado, assistiu a estréia  européia de seu Concerto para dois violões 
                 e orquestra de cordas, pelo Duo Assad, e em Colonia, Alemanha, regeu a Orquestra Südwstfalen Philharmonie 
                 na execução de seu Canticum Naturale. 

</p>
    `,
    galeria: ["/images/pessoas/edino1.avif", "/images/edino.jpg"]
  },
  {
    id: "corgi",
    nome: "Corgi",
    foto: "/images/corgi.jpg",
    bio: `
      <p>Aqui vai a biografia detalhada do segundo compositor.</p>
    `,
    galeria: ["/images/corgi.jpg", "/images/logo.png"]
  }
];

musicos.sort((a, b) => a.nome.localeCompare(b.nome));
---

<Layout title="Violão Catarinense">
    
    <div class="text-center pt-11 mb-16">
        <h1 class="text-4xl font-bold text-red-700 mb-4">Compositores e Violonistas</h1>
        <p class="text-xl mb-16 text-stone-800 font-normal px-4">
            Para conhecer os compositores e violonistas de Santa Catarina, acesse a lista abaixo.
        </p>

        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 px-4">
            {musicos.map((musico) => (
                <div class="group cursor-pointer transform transition-all hover:-translate-y-2" onclick={`abrirModal('${musico.id}')`}>
                    <div class="overflow-hidden rounded-full shadow-lg aspect-square mb-4 relative bg-gray-100 border-4 border-white max-w-[200px] mx-auto">
                        <img src={musico.foto} alt={musico.nome} class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" loading="lazy" />
                        <div class="absolute inset-0 bg-rose-900/0 group-hover:bg-rose-900/20 transition-colors duration-300"></div>
                    </div>
                    <h3 class="text-xl font-bold text-center text-gray-800 group-hover:text-rose-700 transition-colors">{musico.nome}</h3>
                    <p class="text-sm text-center text-gray-500 mt-1">Clique para conhecer</p>

                    <div id={`data-${musico.id}`} class="hidden" data-nome={musico.nome} data-galeria={JSON.stringify(musico.galeria)}>
                        <div class="data-bio" set:html={musico.bio}></div>
                    </div>
                </div>
            ))}
        </div>
    </div>

    <div id="modal-overlay" class="fixed inset-0 z-50 hidden bg-black/90 backdrop-blur-sm flex items-center justify-center p-2 md:p-6 opacity-0 transition-opacity duration-300">
        
        <div class="bg-white rounded-2xl w-full max-w-6xl h-[95vh] md:h-[85vh] overflow-hidden shadow-2xl relative transform scale-95 transition-transform duration-300 flex flex-col md:flex-row" id="modal-content">
            
            <button onclick="fecharModal()" class="absolute top-4 right-4 bg-white/90 hover:bg-white text-gray-800 rounded-full p-2 transition-colors z-30 shadow-md border border-gray-200">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5"><path d="M6 18L18 6M6 6l12 12" /></svg>
            </button>

            <div class="w-full md:w-1/2 bg-stone-200 relative group/gallery border-b md:border-b-0 md:border-r border-gray-200">
                <div class="absolute inset-0 flex items-center justify-center p-6">
                    <img id="modal-img" src="" alt="" class="max-w-full max-h-full w-auto h-auto object-contain shadow-lg bg-white transition-opacity duration-300 ease-in-out opacity-100" />
                </div>
                
                <div id="nav-buttons" class="absolute inset-0 flex items-center justify-between px-4 pointer-events-none z-10">
                    <button onclick="mudarFoto(-1)" class="pointer-events-auto p-3 rounded-full bg-black/30 hover:bg-black/60 text-white transition-all opacity-0 group-hover/gallery:opacity-100">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-6 h-6"><path d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <button onclick="mudarFoto(1)" class="pointer-events-auto p-3 rounded-full bg-black/30 hover:bg-black/60 text-white transition-all opacity-0 group-hover/gallery:opacity-100">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" class="w-6 h-6"><path d="M9 5l7 7-7 7" /></svg>
                    </button>
                </div>

                <div id="gallery-counter" class="absolute bottom-6 left-1/2 -translate-x-1/2 bg-black/50 text-white px-4 py-1.5 rounded-full text-[11px] uppercase tracking-tighter font-bold z-10">
                    1 / 1
                </div>
            </div>

            <div class="w-full md:w-1/2 flex flex-col bg-white overflow-hidden">
                <div class="p-8 md:p-12 overflow-y-auto custom-scrollbar h-full">
                    <h2 id="modal-title" class="text-3xl font-bold text-gray-900 mb-6 border-b-4 border-rose-600 pb-4 inline-block"></h2>
                    <div id="modal-bio" class="text-sm md:text-base text-gray-700 leading-relaxed space-y-5 text-justify pr-4"></div>
                </div>
            </div>
        </div>
    </div>
</Layout>

<style>
    .custom-scrollbar::-webkit-scrollbar { width: 5px; }
    .custom-scrollbar::-webkit-scrollbar-track { background: #f8f8f8; }
    .custom-scrollbar::-webkit-scrollbar-thumb { background: #be123c; border-radius: 10px; }
    body.modal-open { overflow: hidden; padding-right: 5px; }
</style>

<script is:inline>
    let galeriaAtual = [];
    let indiceAtual = 0;

    const modalOverlay = document.getElementById('modal-overlay');
    const modalContent = document.getElementById('modal-content');
    const modalTitle = document.getElementById('modal-title');
    const modalImg = document.getElementById('modal-img');
    const modalBio = document.getElementById('modal-bio');
    const navButtons = document.getElementById('nav-buttons');
    const galleryCounter = document.getElementById('gallery-counter');

    window.abrirModal = (id) => {
        const dataDiv = document.getElementById(`data-${id}`);
        if (!dataDiv) return;

        galeriaAtual = JSON.parse(dataDiv.getAttribute('data-galeria'));
        indiceAtual = 0;
        
        modalTitle.innerText = dataDiv.getAttribute('data-nome');
        modalBio.innerHTML = dataDiv.querySelector('.data-bio').innerHTML;
        
        // Reset de opacidade e carga inicial
        modalImg.style.opacity = '0';
        modalImg.src = galeriaAtual[0];
        modalImg.onload = () => modalImg.style.opacity = '1';

        galleryCounter.innerText = `1 / ${galeriaAtual.length}`;
        navButtons.style.display = galeriaAtual.length > 1 ? 'flex' : 'none';
        galleryCounter.style.display = galeriaAtual.length > 1 ? 'block' : 'none';

        modalOverlay.classList.remove('hidden');
        document.body.classList.add('modal-open');

        setTimeout(() => {
            modalOverlay.classList.remove('opacity-0');
            modalContent.classList.remove('scale-95');
            modalContent.classList.add('scale-100');
        }, 10);
    }

    window.mudarFoto = (direcao) => {
        if (galeriaAtual.length <= 1) return;

        // Inicia o Fade Out
        modalImg.style.opacity = '0';

        setTimeout(() => {
            indiceAtual = (indiceAtual + direcao + galeriaAtual.length) % galeriaAtual.length;
            modalImg.src = galeriaAtual[indiceAtual];
            galleryCounter.innerText = `${indiceAtual + 1} / ${galeriaAtual.length}`;
            
            // Quando a nova imagem carregar, faz o Fade In
            modalImg.onload = () => {
                modalImg.style.opacity = '1';
            };
        }, 250); // Tempo sincronizado com a duração da transição CSS (300ms)
    }

    window.fecharModal = () => {
        modalOverlay.classList.add('opacity-0');
        modalContent.classList.remove('scale-100');
        modalContent.classList.add('scale-95');
        setTimeout(() => {
            modalOverlay.classList.add('hidden');
            document.body.classList.remove('modal-open');
        }, 300);
    }

    modalOverlay.addEventListener('click', (e) => { if (e.target === modalOverlay) fecharModal(); });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && !modalOverlay.classList.contains('hidden')) fecharModal();
        if (e.key === 'ArrowRight') mudarFoto(1);
        if (e.key === 'ArrowLeft') mudarFoto(-1);
    });
</script>
